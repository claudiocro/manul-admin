{"version":3,"sources":["../src/create_admin_context.js"],"names":[],"mappings":";;;;;;;;sBAAc,QAAQ;;;;8BACI,kBAAkB;;;;gCACrB,qBAAqB;;;;sCACf,2BAA2B;;;;qBAGzC,UAAC,IAef,EAAK;;;AAbJ,QAAM,GAFQ,IAef,CAbC,MAAM;MACN,eAAe,GAHD,IAef,CAZC,eAAe;MACf,MAAM,GAJQ,IAef,CAXC,MAAM;MACN,YAAY,GALE,IAef,CAVC,YAAY;MAEZ,MAAM,GAPQ,IAef,CARC,MAAM;;AACN,aAAW,GARG,IAef,CAPC,WAAW;;AACX,YAAU,GATI,IAef,CANC,UAAU;uBATI,IAef,CAJC,SAAS;;;AAAT,WAAS,kCAAG,UAAA,SAAS;WAAI,MAAM,CAAC,KAAK,2EAAyE,SAAS,CAAG;GAAA;uBAX5G,IAef,CAHC,SAAS;MAAT,SAAS,kCAAG,UAAA,KAAK;WAAI,MAAM,CAAC,KAAK,yBAAsB,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,CAAA,CAAG;GAAA;yBAZzE,IAef,CAFC,WAAW;MAAX,WAAW,oCAAG,UAAA,OAAO;WAAI,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC;GAAA;;AAG9C,MAAM,oBAAoB,GAAG,CAAC,MAAM,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;AAC/D,MAAI,oBAAE,IAAI,CAAC,oBAAoB,EAAE,oBAAE,KAAK,CAAC,EAAE;AACzC,UAAM,IAAI,KAAK,CAAC,qDAAqD,EAAE,oBAAoB,CAAC,CAAC;GAC9F;AACD,MAAM,OAAO,GAAG,iCAAc,EAAE,MAAM,EAAN,MAAM,EAAE,eAAe,EAAf,eAAe,EAAE,YAAY,EAAZ,YAAY,EAAE,MAAM,EAAN,MAAM,EAAE,EAAE,MAAM,CAAC,CAAC;AACzF,MAAM,YAAY,GAAG,SAAf,YAAY,CAAI,KAAwB,EAAK;QAA3B,cAAc,GAAhB,KAAwB,CAAtB,cAAc;QAAE,IAAI,GAAtB,KAAwB,CAAN,IAAI;;AAC1C,QAAI,SAAS,GAAG,IAAI,CAAC;AACrB,QAAI,oBAAE,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE;AAClC,eAAS,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;KAC9B,MAAM,IAAI,oBAAE,GAAG,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC,EAAE;AACpD,eAAS,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC;KAC9C,MAAM;AACL,eAAS,GAAG,UAAU,CAAC,IAAI,CAAC,WAAQ,CAAC;KACtC;AACD,aAAS,CAAC,WAAW,cAAY,cAAc,SAAI,IAAI,AAAE,CAAC;AAC1D,WAAO,SAAS,CAAC;GAClB,CAAC;AACF,SAAO;AACL,WAAO,EAAP,OAAO;AACP,gBAAY,EAAZ,YAAY;AACZ,UAAM,EAAN,MAAM;AACN,eAAW,EAAX,WAAW;AACX,aAAS,EAAT,SAAS;AACT,aAAS,EAAT,SAAS;AACT,eAAW,EAAX,WAAW;AACX,cAAU,EAAV,UAAU;AACV,cAAU,+BAAA;AACV,oBAAgB,qCAAA;GACjB,CAAC;CACH","file":"create_admin_context.js","sourcesContent":["import _ from 'lodash';\nimport createMethods from './create_methods';\nimport routeUtils from './utils/route_utils';\nimport publicationUtils from './utils/publication_utils';\n\n\nexport default ({\n  // needed meteor dependencies\n  Meteor,\n  ValidatedMethod,\n  Counts,\n  SimpleSchema,\n\n  config,  // admin config\n  adminRoutes, // FlowRouter, manulRouter compatible routes\n  components, // component definition, see readme\n  /* eslint no-alert: 0*/\n  gotoRoute = routeName => window.alert(`please provide a gotoRoute-function in adminContext that can jump to ${routeName}`),\n  showError = error => window.alert(`an error occured: ${error.reason || error.message}`),\n  showSuccess = message => window.alert(message),\n\n}) => {\n  const neededMeteorPackages = [Meteor, ValidatedMethod, Counts];\n  if (_.some(neededMeteorPackages, _.isNil)) {\n    throw new Error('please provide all of the following meteor-packages', neededMeteorPackages);\n  }\n  const methods = createMethods({ Meteor, ValidatedMethod, SimpleSchema, Counts }, config);\n  const getComponent = ({ collectionName, type }) => {\n    let Component = null;\n    if (_.isFunction(components[type])) {\n      Component = components[type];\n    } else if (_.has(components, [type, collectionName])) {\n      Component = components[type][collectionName];\n    } else {\n      Component = components[type].default;\n    }\n    Component.displayName = `Admin_${collectionName}_${type}`;\n    return Component;\n  };\n  return {\n    methods,\n    getComponent,\n    config,\n    adminRoutes,\n    gotoRoute,\n    showError,\n    showSuccess,\n    components,\n    routeUtils,\n    publicationUtils,\n  };\n};\n"]}