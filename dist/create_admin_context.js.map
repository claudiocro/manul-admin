{"version":3,"sources":["../src/create_admin_context.js"],"names":["Meteor","ValidatedMethod","Counts","LocalState","config","adminRoutes","components","gotoRoute","window","alert","routeName","neededMeteorPackages","Error","join","methods","getComponent","collectionName","type","Component","default","displayName","routeUtils","publicationUtils"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAGe,gBAcT;AAAA,MAZJA,MAYI,QAZJA,MAYI;AAAA,MAXJC,eAWI,QAXJA,eAWI;AAAA,MAVJC,MAUI,QAVJA,MAUI;AAAA,MATJC,UASI,QATJA,UASI;AAAA,MAPJC,MAOI,QAPJA,MAOI;AAAA,MANJC,WAMI,QANJA,WAMI;AAAA,MALJC,UAKI,QALJA,UAKI;AAAA,4BAHJC,SAGI;AAAA,MAHJA,SAGI,kCAHQ;AAAA,WAAaC,OAAOC,KAAP,2EAAqFC,SAArF,CAAb;AAAA,GAGR;;AACJ,MAAMC,uBAAuB,EAAEX,cAAF,EAAUC,gCAAV,EAA2BC,cAA3B,EAAmCC,sBAAnC,EAA7B;AACA,MAAI,oBAAOQ,oBAAP,kBAAJ,EAA2C;AACzC,UAAM,IAAIC,KAAJ,2DAAkE,oBAAOD,oBAAP,EAA6BE,IAA7B,CAAkC,IAAlC,CAAlE,CAAN;AACD;AACD,MAAMC,UAAU,8BAAc,EAAEd,cAAF,EAAUC,gCAAV,EAA2BC,cAA3B,EAAd,EAAmDE,MAAnD,CAAhB;AACA,MAAMW,eAAe,SAAfA,YAAe,QAA8B;AAAA,QAA3BC,cAA2B,SAA3BA,cAA2B;AAAA,QAAXC,IAAW,SAAXA,IAAW;;AACjD,QAAIC,YAAY,IAAhB;AACA,QAAI,0BAAaZ,WAAWW,IAAX,CAAb,CAAJ,EAAoC;AAClCC,kBAAYZ,WAAWW,IAAX,CAAZ;AACD,KAFD,MAEO,IAAI,mBAAMX,UAAN,EAAkB,CAACW,IAAD,EAAOD,cAAP,CAAlB,CAAJ,EAA+C;AACpDE,kBAAYZ,WAAWW,IAAX,EAAiBD,cAAjB,CAAZ;AACD,KAFM,MAEA;AACLE,kBAAYZ,WAAWW,IAAX,EAAiBE,OAA7B;AACD;AACDD,cAAUE,WAAV,cAAiCJ,cAAjC,SAAmDC,IAAnD;AACA,WAAOC,SAAP;AACD,GAXD;AAYA,SAAO;AACLlB,kBADK;AAELG,0BAFK;AAGLD,kBAHK;AAILY,oBAJK;AAKLC,8BALK;AAMLX,kBANK;AAOLC,4BAPK;AAQLE,wBARK;AASLD,0BATK;AAULe,qCAVK;AAWLC;AAXK,GAAP;AAaD,C","file":"create_admin_context.js","sourcesContent":["import _ from 'lodash';\nimport createMethods from './create_methods';\nimport routeUtils from './utils/route_utils';\nimport publicationUtils from './utils/publication_utils';\n\n\nexport default ({\n  // needed meteor dependencies\n  Meteor,\n  ValidatedMethod,\n  Counts,\n  LocalState,\n\n  config,  // admin config\n  adminRoutes, // FlowRouter, manulRouter compatible routes\n  components, // component definition, see readme\n  /* eslint no-alert: 0*/\n  gotoRoute = routeName => window.alert(`please provide a gotoRoute-function in adminContext that can jump to ${routeName}`),\n\n\n}) => {\n  const neededMeteorPackages = { Meteor, ValidatedMethod, Counts, LocalState };\n  if (_.some(neededMeteorPackages, _.isNil)) {\n    throw new Error(`please provide all of the following meteor-packages: ${_.keys(neededMeteorPackages).join(', ')}`);\n  }\n  const methods = createMethods({ Meteor, ValidatedMethod, Counts }, config);\n  const getComponent = ({ collectionName, type }) => {\n    let Component = null;\n    if (_.isFunction(components[type])) {\n      Component = components[type];\n    } else if (_.has(components, [type, collectionName])) {\n      Component = components[type][collectionName];\n    } else {\n      Component = components[type].default;\n    }\n    Component.displayName = `Admin_${collectionName}_${type}`;\n    return Component;\n  };\n  return {\n    Meteor,\n    LocalState,\n    Counts,\n    methods,\n    getComponent,\n    config,\n    adminRoutes,\n    gotoRoute,\n    components,\n    routeUtils,\n    publicationUtils,\n  };\n};\n"]}