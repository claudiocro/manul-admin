{"version":3,"sources":["../../src/hocs/with_collection_props.js"],"names":["searchSchema","searchTerm","type","String","optional","composer","onData","context","collectionName","props","adminContext","getComponent","publicationUtils","config","collections","publications","getPublications","collection","schema","colConfig","Component"],"mappings":";;;;;;;;;;;;;;;;;;;AACA;;AAEA;;;;;;AAEA,IAAMA,eAAe,0BAAiB;AACpCC,cAAY;AACVC,UAAMC,MADI;AAEVC,cAAU;AAFA;AADwB,CAAjB,CAArB;AAMO,IAAMC,WAAW,SAAXA,QAAW;AAAA,SAAQ,gBAAwCC,MAAxC,EAAmD;AAAA,QAAhDC,OAAgD,QAAhDA,OAAgD;AAAA,QAAvCC,cAAuC,QAAvCA,cAAuC;AAAA,QAApBC,KAAoB;;AAAA,mBAK7EF,SAL6E;AAAA,yCAE/EG,YAF+E;AAAA,QAG7EC,YAH6E,yBAG7EA,YAH6E;AAAA,QAG/DC,gBAH+D,yBAG/DA,gBAH+D;AAAA,QAG7CC,MAH6C,yBAG7CA,MAH6C;;AAAA,QAMzEC,WANyE,GAMzDD,MANyD,CAMzEC,WANyE;;AAOjF,QAAMC,eAAeH,iBAAiBI,eAAjB,CAAiCR,cAAjC,CAArB;AAPiF,gCAQpCM,YAAYN,cAAZ,CARoC;AAAA,QAQzES,UARyE,yBAQzEA,UARyE;AAAA,QAQ7DC,MAR6D,yBAQ7DA,MAR6D;AAAA,QAQlDC,SARkD;;AASjF,QAAMC,YAAYT,aAAa,EAAEH,8BAAF,EAAkBN,UAAlB,EAAb,CAAlB;AACAI,WAAO,IAAP;AACEc,0BADF;AAEEH,4BAFF;AAGEC,cAAQA,UAAU,sBAASD,UAAT,EAAqB,cAArB,CAHpB;AAIEjB,gCAJF;AAKEe;AALF,OAMKI,SANL,EAOKV,KAPL;AASD,GAnBuB;AAAA,CAAjB;;;;kBAsBQ;AAAA,SAAQ,oCAAmBJ,SAASH,IAAT,CAAnB,CAAR;AAAA,C","file":"with_collection_props.js","sourcesContent":["\nimport { composeWithTracker } from 'mantra-core';\nimport _ from 'lodash';\nimport SimpleSchema from 'simpl-schema';\n\nconst searchSchema = new SimpleSchema({\n  searchTerm: {\n    type: String,\n    optional: true,\n  },\n});\nexport const composer = type => ({ context, collectionName, ...props }, onData) => {\n  const {\n    adminContext: {\n      getComponent, publicationUtils, config,\n    },\n  } = context();\n  const { collections } = config;\n  const publications = publicationUtils.getPublications(collectionName);\n  const { collection, schema, ...colConfig } = collections[collectionName];\n  const Component = getComponent({ collectionName, type });\n  onData(null, {\n    Component,\n    collection,\n    schema: schema || _.result(collection, 'simpleSchema'),\n    searchSchema,\n    publications,\n    ...colConfig,\n    ...props, // allow override\n  });\n};\n\n\nexport default type => composeWithTracker(composer(type));\n"]}