{"version":3,"sources":["../../src/utils/csv.js"],"names":[],"mappings":";;;;;;;;;;sBAAc,QAAQ;;;;yBACL,WAAW;;;;;;;;;;;;;;AAa5B,IAAM,WAAW,GAAG,SAAd,WAAW,CAAI,IAAyF,EAAK;MAA5F,QAAQ,GAAV,IAAyF,CAAvF,QAAQ;MAAE,IAAI,GAAhB,IAAyF,CAA7E,IAAI;MAAE,YAAY,GAA9B,IAAyF,CAAvE,YAAY;MAAE,IAAI,GAApC,IAAyF,CAAzD,IAAI;oBAApC,IAAyF,CAAnD,MAAM;MAAN,MAAM,+BAAG,KAAK;0BAApD,IAAyF,CAAnC,YAAY;MAAZ,YAAY,qCAAG,EAAE,SAAS,EAAE,GAAG,EAAE;;;;;AAI1G,MAAM,QAAQ,GAAG,oBAAE,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC;WAAM,MAAM;GAAA,CAAC,CAAC,CAAC;AAC3D,MAAM,OAAO,GAAG,YAAY,IAAI,IAAI,CAAC;AACrC,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAA,KAAK;WAAK,oBAAE,MAAM,cAAM,QAAQ,EAAK,KAAK,EAAG;GAAC,CAAC,CAAC;;AAE5E,MAAM,GAAG,GAAG,uBAAK,OAAO,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE,YAAY,CAAC,CAAC;;AAE9E,MAAM,IAAI,GAAG,MAAM,GACjB,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,MAAM,CAAC,GAAQ,CAAC,EAAE,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GACzE,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACzB,MAAM,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAC7C,GAAC,CAAC,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;AAClE,GAAC,CAAC,QAAQ,GAAM,QAAQ,SAAM,CAAC;AAC/B,UAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAC7B,GAAC,CAAC,KAAK,EAAE,CAAC;AACV,UAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;CAC9B,CAAC;;qBAEa,EAAE,WAAW,EAAX,WAAW,EAAE","file":"csv.js","sourcesContent":["import _ from 'lodash';\nimport Papa from 'papaparse';\n\n\n/**\ncreate a csv-file in the browser from the given data\n\ndata: Array of documents\nkeys: all keys of every document that should be included\nfilename: the filename of the resulting csv-file\ncolumnTitles: the column titles on the first row\nuseBom: whether to include a UTF-16 byte order mark\nparseOptions: options for papaparse\n**/\nconst exportAsCsv = ({ filename, keys, columnTitles, data, useBom = false, parseOptions = { delimiter: ';' } }) => {\n  // we encode missing values with \"NULL\"\n  // because CSV has no concept of null/missing values\n  // good read: http://www.garretwilson.com/blog/2009/04/23/csvnull.xhtml\n  const defaults = _.zipObject(keys, keys.map(() => 'NULL'));\n  const columns = columnTitles || keys;\n  const dataPadded = data.map(entry => (_.values({ ...defaults, ...entry })));\n\n  const csv = Papa.unparse({ fields: columns, data: dataPadded }, parseOptions);\n\n  const blob = useBom ?\n    new window.Blob([Buffer.concat([new Buffer('\\ufeff'), new Buffer(csv)])]) :\n    new window.Blob([csv]);\n  const a = window.document.createElement('a');\n  a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n  a.download = `${filename}.csv`;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n};\n\nexport default { exportAsCsv };\n"]}